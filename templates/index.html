<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Reddact Labs - Secure Redaction</title>
    
     <link rel="stylesheet" type="text/css" href="../static/style.css">
</head>
<body>

<div class="container">
    <h1>Reddact Labs </h1>
    <p class="subtitle">Securely find and redact sensitive information from your documents with confidence.</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="post" action="/process" enctype="multipart/form-data" class="upload-form">
        
        <div class="file-drop-zone" id="drop-zone">
            <input type="file" name="file" id="file-input" required>
            <p id="drop-zone-text">Drag & drop your file here, or <span>click to browse</span>.</p>
        </div>

        <!-- Redaction Type -->
        <div class="form-group">
            <label for="redaction_type">Select Redaction Type:</label>
            <select name="redaction_type" id="redaction_type">
                <option value="blackout" selected>Blackout (Standard)</option>
                <option value="reversible">Reversible (Encrypt & ID)</option>
            </select>
        </div>

        <input type="submit" value="Upload & Redact">
    </form>
</div>


<script>
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const dropZoneText = document.getElementById('drop-zone-text');

    dropZone.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            dropZoneText.textContent = `Selected file: ${fileInput.files[0].name}`;
            dropZone.style.borderColor = '#1a7e28';
            dropZone.style.backgroundColor = '#e8f5e9';
        }
    });

    dropZone.addEventListener('dragover', (e) => {
        e.preventDefault(); 
        dropZone.classList.add('dragover');
    });

    dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('dragover');
    });

    dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('dragover');
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            fileInput.files = files;
            dropZoneText.textContent = `Selected file: ${files[0].name}`;
            dropZone.style.borderColor = '#1a7e28';
            dropZone.style.backgroundColor = '#e8f5e9';
        }
    });
</script>

</body>
</html>